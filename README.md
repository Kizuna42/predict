# 空調システム室内温度予測モデル

このプロジェクトは空調システムの室内温度を予測するための機械学習モデルを開発するためのコードを提供します。物理モデルベースの特徴量エンジニアリングと時系列予測を組み合わせて、より精度の高い未来温度予測を実現します。

## 特徴

- 物理法則に基づいた特徴量エンジニアリング
- 未来値の適切な扱いによるデータリーク防止
- 過去の温度履歴への依存度低減
- マルチゾーン温度予測
- 複数の予測ホライゾンをサポート
- 詳細な分析と可視化

## ディレクトリ構造

```
.
├── src/                  # ソースコードディレクトリ
│   ├── data/             # データ処理関連モジュール
│   │   ├── preprocessing.py     # データ前処理
│   │   └── feature_engineering.py  # 特徴量生成
│   ├── models/           # モデル関連モジュール
│   │   ├── training.py   # モデルトレーニング
│   │   └── evaluation.py # モデル評価
│   ├── utils/            # ユーティリティ
│   │   └── visualization.py  # 可視化関連
│   └── config.py         # 設定値
├── Output/               # 出力ディレクトリ
│   └── models/           # 保存されたモデル
├── main.py               # メインスクリプト
├── requirements.txt      # 依存パッケージ
└── README.md             # このファイル
```

## 使い方

### 環境設定

```bash
# 必要なパッケージをインストール
pip install -r requirements.txt
```

### 実行方法

```bash
# メインスクリプトを実行
python main.py
```

### 出力

実行すると、以下の出力が生成されます：

- 学習済みモデル（`Output/models/`ディレクトリ）
- 特徴量重要度のグラフ（`Output/feature_importance_zone_*.png`）
- 予測結果のグラフ（`Output/prediction_vs_actual_horizon_*.png`）
- 時系列予測グラフ（`Output/time_series_horizon_*.png`）
- LAG 依存度分析（`Output/lag_dependency_*.png`および CSV ファイル）
- 予測性能のまとめ（`Output/prediction_summary.csv`）

## データリーク防止対策

本プロジェクトでは、以下のデータリーク防止対策を実施しています：

1. 時系列特性を考慮し、未来の値を使った特徴量エンジニアリングを行わない
2. 移動平均は`min_periods=1`設定で過去のデータのみ使用
3. 多項式特徴量の生成はトレーニングデータのみに基づき、テストデータには変換のみ適用
4. 時系列データのランダム分割は行わず、時間順に分割して評価

## 注意事項

- データファイル（`AllDayData.csv`）は別途用意する必要があります
- 大規模なデータセットを使用する場合はメモリ使用量に注意してください
